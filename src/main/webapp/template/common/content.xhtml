<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<body>    
<ui:composition>
    <!-- Main Body -->
    <div id="mainBody">
        <h:body>
            <div id="left_col">
                <h:form id="login">
                    <table class="form">
                        <th>#{messages.login}</th>
                        <tr>
                            <td class="left">
                                <h:outputLabel for="username" value ="#{messages.username}: "/>
                            </td>
                            <td class="right">
                                <h:inputText id ="username" value="#{login.username}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="left">
                                <h:outputLabel for ="password" value ="#{messages.password}: "/>
                            </td>
                            <td class="right"> 
                                <h:inputSecret id ="password" value="#{login.password}"/>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <h:commandButton value ="#{messages.login}" onclick="return loginCheck()" action ="#{login.login()}"/>
                            </td>
                        </tr>

                    </table>

                </h:form>
            </div>

            <f:view>
                <div id="left_col">
                    <h:form id="registration" >
                        <table class="form">
                            <th>#{messages.newAccount}</th>
                            <tr>
                                <td class="left">
                                    <h:outputLabel for="username" value ="#{messages.username}: "/>
                                </td>
                                <td class="right">
                                    <h:inputText id ="username" value="#{login.username}"/>
                                </td>
                            </tr>
                            <tr>
                                <td class="left">
                                    <h:outputLabel for ="password" value ="#{messages.password}: "/>
                                </td>
                                <td class="right">
                                    <h:inputSecret id ="password" value="#{login.password}"/>
                                </td>
                            </tr>
                            <tr>
                                <td class="left">
                                    <h:outputLabel for ="ssn" value ="#{messages.ssn}: "/>
                                </td>
                                <td class="right">
                                    <h:inputText id ="ssn" value="#{login.ssn}"/>
                                </td>
                            </tr>
                            <tr>
                                <td class="left">
                                    <h:outputLabel for ="name" value ="#{messages.name}: "/>
                                </td>
                                <td class="right">
                                    <h:inputText id ="name" value="#{login.name}"/>
                                </td>
                            </tr>
                            <tr>
                                <td class="left">
                                    <h:outputLabel for ="surname" value ="#{messages.surname}: "/>
                                </td>
                                <td class="right">
                                    <h:inputText id ="surname" value="#{login.surname}"/>
                                </td>
                            </tr>
                            <tr>
                                <td class="left">
                                    <h:outputLabel for ="email" value ="#{messages.email}: "/>
                                </td>
                                <td class="right">
                                    <h:inputText id ="email" value="#{login.email}"/>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <h:commandButton value ="#{messages.reg}" action ="#{login.newAccount()}"/>
                                </td>
                            </tr>
                        </table>
                    </h:form>
                </div>    
            </f:view>
            
            <h:outputLabel rendered="#{!login.resultLogin}" value="#{messages.loginError}"/>
            <h:outputLabel rendered="#{!login.result}" value="#{messages.existAccount}"/>

            <script language="javascript">
                function loginCheck(){
                    var validation = true;
                    var username = document.getElementById("login:username");
                    var password = document.getElementById("login:password");
                    
                    if(username.value == ""){
                        alert("You must enter the username");
                        validation = false;
                    }
                    else if(password.value == ""){
                        alert("You must enter the password");
                        validation = false;
                    }
                    
                    return validation;
                }
                
                
                function checkData() {

                    var validation = true;
                    var username = document.getElementById("registration:username");
                    var password = document.getElementById("registration:password");
                    var ssn = document.getElementById("registration:ssn");
                    var name = document.getElementById("registration:name");
                    var surname = document.getElementById("registration:surname");
                    var email = document.getElementById("registration:email");
                    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                    var ssnReg = /^\d{10}$/;
                    var passwordReg = /^\w*\d{1,}$/;
                    var usernameReg = /^\w*$/;
                    
                    if (username.value == "") {
                        alert("You must enter a username");
                        validation = false;
                    }
                    else if (!usernameReg.test(username.value)){
                        alert("Invalid username");
                        validation = false;
                    }
                    else if (password.value == "") {
                        alert("You must enter a password");
                        validation = false;
                    }
                    else if(!passwordReg.test(password.value)){
                        alert("Invalid password");
                        validation = false;
                    }
                    else if (ssn.value == "") {
                        alert("You must enter a ssn");
                        validation = false;
                    }
                    else if (!ssnReg.test(ssn.value)){
                        alert("Invalid ssn");
                        validation = false;
                    }
                    else if (name.value == "") {
                        alert("You must enter a name");
                        validation = false;
                    }
                    else if (surname.value == "") {
                        alert("You must enter a surname");
                        validation = false;
                    }
                    else if (email.value == "") {
                        alert("You must enter a email");
                        validation = false;
                    }
                    else if (!emailReg.test(email.value)){
                        alert("Invalid email, try again");
                        validation = false;
                    }


                            return validation;
                }
            </script>
        </h:body>
    </div>
   <!-- Main Body Ends -->
</ui:composition>
</body>    
</html>
